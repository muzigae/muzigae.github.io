---
layout: post
category: [PS, BOJ, P5]
title:  "BOJ 3197 백조의 호수"
date:   2022-02-02 02:52:27 +0900
author: muzigae
use_math: true
---
[BOJ 3197 백조의 호수](https://www.acmicpc.net/problem/3197)

{% highlight C++ linenos %}
#include <iostream>
#include <queue>
using namespace std;
using vi = vector<int>;

int main() {
    ios::sync_with_stdio(false); cin.tie(NULL); cout.tie(NULL);
    int r, c; cin >> r >> c;
    vector<vector<char> > lake(r, vector<char>(c));
    vector<vi> wcheck(r, vi(c, 0)), scheck(r, vi(c, 0)), swan;
    queue<vi> water;
    for (int i = 0; i < r; i++) {
        for (int j = 0; j < c; j++) {
            cin >> lake[i][j];
            if (lake[i][j] == 'L') swan.push_back({ i, j });
            if (lake[i][j] == '.' || lake[i][j] == 'L') {
                wcheck[i][j] = 1;
                water.push({ i, j });
            }
        }
    } scheck[swan[0][0]][swan[0][1]] = 1;
    
    vector<vi> dir = { {1, 0}, {0, 1}, {-1, 0}, {0, -1} };
    bool meet = false;
    queue<vi> S, ice, melt; S.push(swan[0]);
    int cnt = 0;
    while (!meet) {
        if (cnt) {
            S = ice; water = melt;
        }
        ice = melt = queue<vi>();

        while (!S.empty()) {
            int x = S.front()[0], y = S.front()[1];
            S.pop();
            for (auto d : dir) {
                int nx = x + d[0], ny = y + d[1];
                if (nx < 0 || nx >= r || ny < 0 || ny >= c) continue;
                if (scheck[nx][ny]) continue;
                scheck[nx][ny] = true;

                if (lake[nx][ny] == 'L') {
                    meet = true; break;
                }
                else if (lake[nx][ny] == '.') S.push({ nx, ny });
                else ice.push({ nx, ny });
            }
            if (meet) break;
        }
        if (meet) break;

        while (!water.empty()) {
            int x = water.front()[0], y = water.front()[1];
            water.pop();
            for (auto d : dir) {
                int nx = x + d[0], ny = y + d[1];
                if (nx < 0 || nx >= r || ny < 0 || ny >= c) continue;
                if (wcheck[nx][ny]) continue;
                wcheck[nx][ny] = true;

                if (lake[nx][ny] == 'X') {
                    melt.push({ nx, ny });
                    lake[nx][ny] = '.';
                }
            }
        } cnt++;
    } cout << cnt;
    return 0;
}
{% endhighlight %}